<!DOCTYPE html>
<html>
  <head>
    <title>Rally PeruMoney üöÄüèÅ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      .chart-container {
        width: 95%;
        height: 800px;
        margin: 10px auto;
        padding: 10px;
        background-color: white;
      }
      h2 {
        text-align: center;
        color: #333;
        font-family: Arial, sans-serif;
        margin: 10px 0 5px 0;
      }
      .total-registros {
        text-align: center;
        color: #666;
        font-family: Arial, sans-serif;
        font-size: 14px;
        margin: 0 0 15px 0;
      }
    </style>
  </head>
  <body>
    <div class="chart-container">
      <h2>Rally PeruMoney üöÄüèÅ</h2>
      <div class="total-registros">Total de registros: 108</div>
      <canvas id="userChart"></canvas>
    </div>

    <script>
      function generateColors(num) {
        const colors = [
          "#FF6384",
          "#36A2EB",
          "#FFCE56",
          "#4BC0C0",
          "#9966FF",
          "#FF9F40",
          "#FF6B6B",
          "#4ECDC4",
          "#7CB342",
          "#7986CB",
          "#BA68C8",
          "#4DB6AC",
          "#FFB74D",
          "#F06292",
          "#64B5F6",
          "#81C784",
          "#FFD54F",
          "#A1887F",
          "#90A4AE",
          "#E57373",
          "#7E57C2",
          "#66BB6A",
          "#FFA726",
          "#26A69A",
          "#42A5F5",
          "#AB47BC",
          "#EC407A",
          "#5C6BC0",
          "#26C6DA",
          "#8D6E63",
          "#78909C",
          "#EF5350",
          "#29B6F6",
          "#66BB6A",
          "#FDD835",
        ];

        while (colors.length < num) {
          colors.push("#" + Math.floor(Math.random() * 16777215).toString(16));
        }

        return colors;
      }

      const ctx = document.getElementById("userChart").getContext("2d");
      const data = {
        labels: [
          "YVILCHEZ",
          "YHUERE",
          "MBRENA",
          "RMEZA",
          "MGALVEZ",
          "NHUAMANCAYO",
          "CHUAMAN",
          "AALEGRE",
          "KCHIPANA",
          "IBOCANEGRA",
          "SHANCO",
          "SSANCHEZ",
          "EHUAMAN",
          "LCANCHARI",
          "KPAZ",
          "GGARCIA",
          "MVASQUEZ",
          "JRIVERA",
          "MPEREZ",
          "SROMERO",
          "JVILELA",
          "OTORRES",
          "JUCANAN",
          "LNAVARRO",
          "MGUZMAN",
          "SCONDOR",
          "MIRRARAZABAL",
          "JHERENCIA",
          "RCRUZ",
          "KOJEDA",
          "AMAU",
          "HBENITES",
          "SDURAND",
          "RLOZADA",
          "FGUILLEN",
        ],
        datasets: [
          {
            data: [
              17, 13, 11, 11, 9, 6, 5, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1,
              1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
            ],
            backgroundColor: generateColors(35),
            borderWidth: 0,
          },
        ],
      };

      new Chart(ctx, {
        type: "bar",
        data: data,
        options: {
          indexAxis: "y",
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              beginAtZero: true,
              grid: {
                display: false,
              },
            },
            y: {
              grid: {
                display: false,
              },
            },
          },
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: true,
              callbacks: {
                label: function (context) {
                  return context.parsed.x + " registros";
                },
              },
            },
            customPlugin: {
              afterDraw: function (chart) {
                var ctx = chart.ctx;
                ctx.font = "bold 12px Arial";
                ctx.textAlign = "left";
                ctx.textBaseline = "middle";
                ctx.fillStyle = "#000";

                chart.data.datasets.forEach(function (dataset, datasetIndex) {
                  chart
                    .getDatasetMeta(datasetIndex)
                    .data.forEach(function (bar, index) {
                      var data = dataset.data[index];
                      ctx.fillText(data, bar.x + 5, bar.y);
                    });
                });
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
